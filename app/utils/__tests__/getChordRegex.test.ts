import {
  getChordLineRegex,
  getChordRegex,
  getDoubleChordLinesRegex,
} from "../getChordRegex";

// set this to true to debug the outputs as objects
const DO_DEBUG_OBJECT = false;

describe("getChordRegex", () => {
  it("Single Chord Regex", () => {
    const actual = getChordRegex("mg");
    if (DO_DEBUG_OBJECT) console.log(JSON.stringify(actual.source, null, 2));

    expect(actual).toStrictEqual(
      /[A-H][b#]?(?:(?:5|dim(?:5|7)?|aug5?|\+5?|-5?)|(?:(?:(?:mi?n?)?(?:(?:2|4|6|7|9|11|13|6\/9)|(?:maj?|Ma?j?)?(?:6|7|9|11|13))?)(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:sus(?:2|4|24|2sus4)?)?(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:add[b#]?(?:2|4|6|7|9|11|13))?)(?:\((?:(?:maj?|Ma?j?)?(?:6|7|9|11|13)?)(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:sus(?:2|4|24|2sus4)?)?(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:add[b#]?(?:2|4|6|7|9|11|13))?\))?)(?:\/[A-H][b#]?)?(?=$|\s)/gm
    );
  });

  it("A Chord Line Regex", () => {
    const actual = getChordLineRegex("mg");
    if (DO_DEBUG_OBJECT) console.log(JSON.stringify(actual.source, null, 2));

    expect(actual).toStrictEqual(
      /^[^\S\r\n]*(?:(?:[A-H][b#]?(?:(?:5|dim(?:5|7)?|aug5?|\+5?|-5?)|(?:(?:(?:mi?n?)?(?:(?:2|4|6|7|9|11|13|6\/9)|(?:maj?|Ma?j?)?(?:6|7|9|11|13))?)(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:sus(?:2|4|24|2sus4)?)?(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:add[b#]?(?:2|4|6|7|9|11|13))?)(?:\((?:(?:maj?|Ma?j?)?(?:6|7|9|11|13)?)(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:sus(?:2|4|24|2sus4)?)?(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:add[b#]?(?:2|4|6|7|9|11|13))?\))?)(?:\/[A-H][b#]?)?(?=$|\s))(?:[^\S\r\n]|$)+)+(?:[^\S\r\n]|$)+/gm
    );
  });

  it("Double Chord Lines with exactly one newline Regex", () => {
    const actual = getDoubleChordLinesRegex("mg");
    if (DO_DEBUG_OBJECT) console.log(JSON.stringify(actual.source, null, 2));

    expect(actual).toStrictEqual(
      /(^[^\S\r\n]*(?:(?:[A-H][b#]?(?:(?:5|dim(?:5|7)?|aug5?|\+5?|-5?)|(?:(?:(?:mi?n?)?(?:(?:2|4|6|7|9|11|13|6\/9)|(?:maj?|Ma?j?)?(?:6|7|9|11|13))?)(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:sus(?:2|4|24|2sus4)?)?(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:add[b#]?(?:2|4|6|7|9|11|13))?)(?:\((?:(?:maj?|Ma?j?)?(?:6|7|9|11|13)?)(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:sus(?:2|4|24|2sus4)?)?(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:add[b#]?(?:2|4|6|7|9|11|13))?\))?)(?:\/[A-H][b#]?)?(?=$|\s))(?:[^\S\r\n]|$)+)+(?:[^\S\r\n]|$)+)\n(^[^\S\r\n]*(?:(?:[A-H][b#]?(?:(?:5|dim(?:5|7)?|aug5?|\+5?|-5?)|(?:(?:(?:mi?n?)?(?:(?:2|4|6|7|9|11|13|6\/9)|(?:maj?|Ma?j?)?(?:6|7|9|11|13))?)(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:sus(?:2|4|24|2sus4)?)?(?:\((?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))\)|(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11)))*(?:add[b#]?(?:2|4|6|7|9|11|13))?)(?:\((?:(?:maj?|Ma?j?)?(?:6|7|9|11|13)?)(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:sus(?:2|4|24|2sus4)?)?(?:[b-](?:5|6|9|13)|[#+](?:4|5|9|11))*(?:add[b#]?(?:2|4|6|7|9|11|13))?\))?)(?:\/[A-H][b#]?)?(?=$|\s))(?:[^\S\r\n]|$)+)+(?:[^\S\r\n]|$)+)/gm
    );
  });
});
